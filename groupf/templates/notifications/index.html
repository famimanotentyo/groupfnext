{% extends 'base.html' %}

{% block title %}通知一覧{% endblock %}

{% block content %}
<div class="container py-4" style="max-width: 800px;">
    <h2 class="h3 mb-4">通知一覧</h2>

    <div class="list-group shadow-sm">
        {% for notification in notifications %}
        <a href="{{ notification.link_url|default:'#' }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start {% if not notification.is_read %}bg-light border-start border-5 border-primary{% endif %}">
            <div class="ms-2 me-auto">
                <div class="fw-bold d-flex align-items-center">
                    {% if notification.notification_type.code == 'interview_invite' %}
                    <span class="badge bg-info text-dark me-2">面談</span>
                    {% elif notification.notification_type.code == 'info' %}
                    <span class="badge bg-secondary me-2">お知らせ</span>
                    {% else %}
                    <span class="badge bg-light text-dark border me-2">{{ notification.notification_type.name }}</span>
                    {% endif %}
                    {{ notification.title }}
                </div>
                <div class="small mt-1 text-muted" style="white-space: pre-wrap;">{{ notification.message|truncatechars:100 }}</div>
                <div class="text-muted extra-small mt-2" style="font-size: 0.85em;">
                    {{ notification.created_at|date:"Y/m/d H:i" }}
                </div>
            </div>
            {% if not notification.is_read %}
            <span class="badge bg-primary rounded-pill">新着</span>
            {% endif %}
        </a>
        {% empty %}
        <div class="list-group-item text-center py-5 text-muted">
            通知はありません
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
